!function(){function add_event(element,event,callback){element.addEventListener?element.addEventListener(event,callback,!1):element.attachEvent("on"+event,callback)}function listener(event){event.data=="close_"+widget.prefix+"_publisher"&&widget&&widget.iframe&&(widget.iframe.parentNode.removeChild(widget.iframe),widget.iframe=null)}function isWindow(obj){return null!=obj&&obj===obj.window}function getWindow(elem){return isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}function find_coordinates(elem){var docElem,win,box={top:0,left:0},doc=elem&&elem.ownerDocument;if(doc){docElem=doc.documentElement,"undefined"!=typeof elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc);var y=box.top+win.pageYOffset-docElem.clientTop,x=box.left+win.pageXOffset-docElem.clientLeft,styleBody=win.getComputedStyle(doc.body);if(doc.body!=elem&&"relative"==styleBody.getPropertyValue("position")){var bodyCoords=find_coordinates(doc.body);x-=bodyCoords.x,y-=bodyCoords.y;var margin_y=parseInt(styleBody.getPropertyValue("margin-top"))||0,margin_x=parseInt(styleBody.getPropertyValue("margin-left"))||0;margin_y&&(y+=margin_y),margin_x&&(x+=margin_x)}var styleElem=win.getComputedStyle(elem),border_top=parseInt(styleElem.getPropertyValue("border-top-width"))||0,border_left=parseInt(styleElem.getPropertyValue("border-left-width"))||0,padding_top=parseInt(styleElem.getPropertyValue("padding-top"))||0,padding_left=parseInt(styleElem.getPropertyValue("padding-left"))||0;return{y:y+border_top+padding_top,x:x+border_left+padding_left}}}function get_random_int(min,max){return Math.floor(Math.random()*(max-min+1))+min}function show_button_holder(image){var doc=image&&image.ownerDocument,win=getWindow(doc),coords=find_coordinates(image),top=coords.y+OFFSET_FROM_EDGE,left=coords.x+image.width-(ICON_SIZE*NUM_ICONS+2*PADDING+SHARE_SIZE+NUM_ICONS-1)-OFFSET_FROM_EDGE;button_holder.style.top=top+"px",button_holder.style.left=left+"px",button_holder.style.opacity=1;var style=win.getComputedStyle(image),zindex=parseInt(style.getPropertyValue("z-index"))||0;button_holder.style.zIndex=zindex+1,current_image=image;for(var j=0;j<button_holder.children.length;j++){var button=button_holder.children[j];"a"==button.tagName.toLowerCase()&&(button.href=button.get_url())}button_holder.show_event_sended||(button_holder.show_event_sended=!0,1==get_random_int(1,1e3)&&send_event("show"))}function hide_button_holder(){button_holder.style.opacity=0,hide_tooltip();for(var j=0;j<button_holder.children.length;j++){var button=button_holder.children[j];"a"==button.tagName.toLowerCase()&&(button.href="#")}button_holder.show_event_sended=!1}function set_image_events(image){var ratio=image.width/image.height;image.width>=100&&image.height>=100&&image.width+image.height>=550&&(image.width>=400||image.height>=400||ratio>=3/8&&8/3>=ratio)&&(image.onmouseover=function(){hide_timer&&(clearTimeout(hide_timer),hide_timer=null),show_button_holder(this)},image.onmouseout=function(){hide_timer=setTimeout(function(){hide_button_holder(),hide_timer=null},100)},image.onmousemove=function(){hide_timer&&(clearTimeout(hide_timer),hide_timer=null),show_button_holder(this)})}function create_button(position){function mouse_over_button(){show_tooltip(this),this.style.opacity=1}function mouse_out_button(){hide_tooltip(),this.style.opacity=.9}var button=document.createElement("a");return button.style.position="absolute",button.style.top=PADDING+"px",button.style.cursor="pointer",button.style.display="block",button.style.width=ICON_SIZE+"px",button.style.height=ICON_SIZE+"px",button.style.transition="opacity 0.2s ease",button.style.opacity=.9,button.style.borderRadius="3px",button.style.border="0px",button.style.padding="0px",button.style.margin="0 1px 0 "+(SHARE_SIZE+position*ICON_SIZE+position)+"px",button.href="#",button.onmouseover=mouse_over_button,button.onmouseout=mouse_out_button,button}function create_image_button(position,num_icon){var button=create_button(position);return button.style.background='url("'+CROSSPOST_BUTTON_URL+'") no-repeat 0 -'+num_icon*ICON_SIZE+"px",button}function show_tooltip(elem){var tooltip_holder=document.getElementById(widget.prefix+"-tooltip"),tooltip_message=document.getElementById(widget.prefix+"-message");tooltip_holder||(tooltip_holder=document.createElement("div"),tooltip_holder.id=widget.prefix+"-tooltip",tooltip_holder.style.position="absolute",tooltip_holder.style.padding="5px 0",tooltip_message=document.createElement("div"),tooltip_message.id=widget.prefix+"-message",tooltip_message.style.borderRadius="3px",tooltip_message.style.backgroundColor="#000",tooltip_message.style.color="#fff",tooltip_message.style.maxWidth="300px",tooltip_message.style.padding="3px 8px",tooltip_message.style.textAlign="center",tooltip_message.style.lineHeight="1",tooltip_message.style.fontSize="12px",tooltip_message.style.fontFamily="'lucida grande', tahoma, verdana, arial, sans-serif",tooltip_holder.appendChild(tooltip_message),document.body.appendChild(tooltip_holder)),tooltip_message.innerHTML=elem.getAttribute(widget.prefix+"-tooltip"),tooltip_holder.style.display="block";var pos=find_coordinates(elem);tooltip_holder.style.top=pos.y+ICON_SIZE+5+"px",tooltip_holder.style.left=pos.x-(tooltip_message.offsetWidth-ICON_SIZE)/NUM_ICONS+"px"}function hide_tooltip(){var tooltip_holder=document.getElementById(widget.prefix+"-tooltip");tooltip_holder&&(tooltip_holder.style.display="none")}function send_event(event,button){var url=document.location.protocol+"//eventsbck.ninuadev.appspot.com/event?data=",params="";params=button?'{"'+event+'": {"_project": "'+PROJECT+'", "button": "'+button+'"}}':'{"'+event+'": {"_project": "'+PROJECT+'"}}';var iframe=document.createElement("iframe");iframe.src=url+params,iframe.style.display="none",document.body.appendChild(iframe)}function search_images(){function indexOf(value,array){for(var i=0;i<array.length;i++)if(array[i]===value)return i;return-1}function is_header_or_footer(elem){for(;elem;){var classes=elem.className?elem.className.toLowerCase().split(" "):[],id=elem.id?elem.id.toLowerCase():"",tag_name=elem.tagName?elem.tagName.toLowerCase():"";if("header"==id||-1!=indexOf("header",classes)||"header"==tag_name)return!0;if("footer"==id||-1!=indexOf("footer",classes)||"footer"==tag_name)return!0;elem=elem.parentNode}return!1}button_holder=document.createElement("div"),button_holder.setAttribute("class",widget.prefix+"_button_holder"),button_holder.style.overflow="hidden",button_holder.style.boxSizing="border-box",button_holder.style.width=ICON_SIZE*NUM_ICONS+NUM_ICONS+2*PADDING+SHARE_SIZE+"px",button_holder.style.height=ICON_SIZE+2*PADDING+"px",button_holder.style.position="absolute",button_holder.style.top="-9999px",button_holder.style.left="-9999px",button_holder.style.zIndex=1e7,button_holder.style.opacity=0,button_holder.style.padding=PADDING+"px",button_holder.style.borderRadius="3px",button_holder.style.backgroundColor="rgba(0,0,0,0.5)",button_holder.style.margin="0px",button_holder.style.transition="opacity 0.2s ease",button_holder.style.direction="ltr",button_holder.onmouseover=function(){hide_timer?(clearTimeout(hide_timer),hide_timer=null):current_image&&show_button_holder(current_image)},button_holder.onmouseout=function(){hide_timer=setTimeout(function(){hide_button_holder(),hide_timer=null},100)};var share_text=document.createElement("span");share_text.innerHTML="SHARE",share_text.style.color="white",share_text.style.fontFamily="arial",share_text.style.fontSize="12px",share_text.style.position="absolute",share_text.style.top=PADDING+"px",share_text.style.left=PADDING+"px",share_text.style.lineHeight=ICON_SIZE+"px",button_holder.appendChild(share_text);var pin_button=create_image_button(0,0);pin_button.setAttribute(widget.prefix+"-tooltip","Share to Pinterest"),pin_button.get_url=function(){var params={url:document.location.href,media:current_image.src,description:document.title},url="//www.pinterest.com/pin/create/button/?"+encode_params(params);return url},pin_button.onclick=function(){if(current_image){send_event("click","pin");var url=this.get_url();window.open(url,"_blank","width=700, height=500")}return!1};var fb_button=create_image_button(1,2);fb_button.setAttribute(widget.prefix+"-tooltip","Share to Facebook"),fb_button.get_url=function(){var params={u:document.location.href},url="//www.facebook.com/sharer/sharer.php?"+encode_params(params);return url},fb_button.onclick=function(){if(current_image){send_event("click","fb");var url=this.get_url();window.open(url,"_blank","width=700, height=500")}return!1};var tw_button=create_image_button(2,3);tw_button.setAttribute(widget.prefix+"-tooltip","Share to Twitter"),tw_button.get_url=function(){var params={url:document.location.href,text:document.title},url="//twitter.com/intent/tweet/?"+encode_params(params);return url},tw_button.onclick=function(){if(current_image){send_event("click","tw");var url=this.get_url();window.open(url,"_blank","width=700, height=500")}return!1};var sym_button=create_image_button(3,1);sym_button.setAttribute(widget.prefix+"-tooltip","Share to many social networks at once"),sym_button.get_url=function(){var options={method:"picture",image_src:current_image.src,source:"image"};return widget.get_publisher_link(document.location.href,options)},sym_button.onclick=function(){if(current_image){send_event("click","sym");var link=this.get_url();widget.open_dialog(link)}return!1};var widgets_button=create_image_button(4,7);widgets_button.target="_blank",widgets_button.setAttribute(widget.prefix+"-tooltip","Get this widget on your site"),widgets_button.get_url=function(){return WEBSITE_ROOT_URL+"widgets"},widgets_button.onclick=function(){send_event("click","more")},button_holder.appendChild(pin_button),button_holder.appendChild(fb_button),button_holder.appendChild(tw_button),button_holder.appendChild(sym_button),button_holder.appendChild(widgets_button),document.body.appendChild(button_holder);for(var images=document.getElementsByTagName("img"),i=0;i<images.length;i++){var img=images[i];is_header_or_footer(img)||"nopin"!=img.getAttribute("nopin")&&(set_image_events(img),img.old_onload=img.onload,img.onload=function(){this.old_onload&&this.old_onload(),set_image_events(this)})}}function merge_params(obj1,obj2){var result={};if(obj1)for(var attrname in obj1)result[attrname]=obj1[attrname];if(obj2)for(var attrname in obj2)result[attrname]=obj2[attrname];return result}function encode_params(params){if(!params)return"";var result="";for(var name in params){var value=params[name];value&&(result=result+"&"+encodeURIComponent(name)+"="+encodeURIComponent(value))}return result}window.symphony=window.symphony||{};var widget=window.symphony;if(!widget.is_loaded){widget.is_loaded=!0,widget.options={},widget.version="1.0",widget.prefix="symphony";var WEBSITE_ROOT_URL,WIDGET_ROOT_URL;WEBSITE_ROOT_URL="//www.symphonytools.com/",WIDGET_ROOT_URL="//widget.symphonytools.com/widget/";var PROJECT,PROJECT="nb_crosspost",CROSSPOST_BUTTON_URL=WIDGET_ROOT_URL+"images/crosspost.png?v=2",ICON_SIZE=24,OFFSET_FROM_EDGE=8,NUM_ICONS=5,PADDING=3,SHARE_SIZE=50,current_image=null,hide_timer=null,button_holder=null,button_image=null;add_event(window,"message",listener),widget.show_publisher=function(message,options){options=options||{};var link=widget.get_publisher_link(message,options);widget.open_dialog(link,options)},widget.open_dialog=function(link,options){if(options=options||{},"dialog"==options.mode){link+="&mode=dialog";var width=800,offset_left=(screen.availWidth-width)/2,offset_top=70;window.open(link,"_blank","width=970,height=420,titlebar=no,status=no,menubar=no,location=no,top="+offset_top+",left="+offset_left)}else{var temp=document.createElement("div");temp.style.position="fixed",temp.style.top=0,temp.style.left=0,temp.style.width="100%",temp.style.height="100%",temp.style.maxWidth="100%",temp.style.maxHeight="100%",temp.style.zIndex=1e9,temp.style.backgroundColor="rgba(0,0,0,0.6)",document.body.appendChild(temp);var iframe=document.createElement("iframe");iframe.id=widget.prefix+"_frame",iframe.src=link,iframe.style.position="fixed",iframe.style.top=0,iframe.style.left=0,iframe.style.zIndex=1e9,iframe.style.width="100%",iframe.style.height="100%",iframe.style.maxWidth="100%",iframe.style.maxHeight="100%",iframe.style.visibility="hidden",iframe.onload=function(){temp.parentElement.removeChild(temp),iframe.style.visibility="visible"},document.body.appendChild(iframe),widget.iframe=iframe}},widget.get_publisher_link=function(message,options){options=options||{},message==options.image_src&&(message="");var link=WEBSITE_ROOT_URL+"publisher?message="+encodeURIComponent(message)+"&version="+widget.version+(options.source?"&source="+options.source:"")+(options.method?"&method="+options.method:"")+(options.image_src?"&image_src="+encodeURIComponent(options.image_src):""),all_params=merge_params(widget.options.params,options.params);return link=link+"&"+encode_params(all_params)},widget.attach_images=function(){if("complete"==document.readyState){for(var metas=document.getElementsByTagName("meta"),i=0;i<metas.length;i++){var meta=metas[i];if("pinterest"==meta.getAttribute("name")&&"nopin"==meta.getAttribute("content"))return!1}button_image=new Image,button_image.src=CROSSPOST_BUTTON_URL,button_image.onload=function(){widget.crosspost_loaded||(widget.crosspost_loaded=!0,search_images())}}else setTimeout(widget.attach_images,100)},widget.attach_buttons=function(){if("complete"==document.readyState)for(var buttons=document.getElementsByClassName(widget.prefix+"_crosspost"),i=0;i<buttons.length;i++)add_event(buttons[i],"click",function(e){e=e||window.event;var target=e.target||e.srcElement;for(3==target.nodeType&&(target=target.parentNode);target&&"a"!=target.tagName.toLowerCase();)target=target.parentNode;widget.show_publisher(target.getAttribute("data-href")||document.location.href),e.preventDefault()});else setTimeout(widget.attach_buttons,100)},widget.init=function(options){options=options||{},options.features=options.features||["image","button"],widget.options=options;for(var i=0;i<options.features.length;i++){var feature=options.features[i];"image"==feature?widget.attach_images():"button"==feature&&widget.attach_buttons()}}}}(),"undefined"==typeof networkedblogs?document.write("<span style='color:red'>NetworkedBlogs widget not installed correctly</span>"):("undefined"==typeof networkedblogs.nwidget&&(networkedblogs.nwidget={}),networkedblogs.url="http://www.networkedblogs.com/",networkedblogs.nwidget.url="http://nwidget.networkedblogs.com/",networkedblogs.nwidget.popupFollow=function(){return window.open(networkedblogs.url+"blog/"+networkedblogs.shortName+"/popup","NetworkedBlogs","status=1,toolbar=1,scrollbars=1,width=670,height=450"),!1},networkedblogs.nwidget.getFanCount=function(w,h){var xFanCount=Math.floor(w/41),yFanCount=Math.floor(h/41);return xFanCount*yFanCount},networkedblogs.nwidget.init=function(){var n=networkedblogs.nwidget,container=document.getElementById("networkedblogs_nwidget_container"),widget=document.getElementById("networkedblogs_nwidget_widget"),body=document.getElementById("networkedblogs_nwidget_body");if("undefined"==typeof n.width){if(!(container.clientWidth>0))return void setTimeout(networkedblogs.nwidget.init,100);n.width=container.clientWidth}if("undefined"==typeof n.height){if(!(container.clientHeight>0))return void setTimeout(networkedblogs.nwidget.init,100);n.height=container.clientHeight-container.style.paddingTop.replace("px","")}widget.style.width=n.width-2+"px",widget.style.height=n.height+"px",body.style.height=n.height-54+"px",n.fanCount=n.getFanCount(n.width-2,n.height-54-10),n.iframe=document.createElement("iframe"),n.iframe.id="networkedblogs_nwidget_iframe",n.iframe.frameBorder="0",n.iframe.marginHeight="0",n.iframe.marginWidth="0",n.iframe.width="100%",n.iframe.height="100%",n.iframe.scrolling="no",n.iframe.src="number"==typeof n.fanCount?n.url+"getnetworkwidgetmain?bid="+networkedblogs.blogId.toString()+"&fancount="+n.fanCount.toString():n.url+"getnetworkwidgetmain?bid="+networkedblogs.blogId.toString(),body.appendChild(n.iframe),document.getElementById("networkedblogs_nwidget_follow").getElementsByTagName("a")[0].onclick=n.popupFollow},networkedblogs.is_send=!1,networkedblogs.timer=!1,networkedblogs.checkVisibility=function(){if(!networkedblogs.is_send){var elem=document.getElementById("networkedblogs_nwidget_container"),scrollTop=networkedblogs.getWindowTop(),scrollBottom=scrollTop+networkedblogs.getWindowHeight(),elemTop=networkedblogs.getElemTop(elem),elemBottom=elemTop+elem.clientHeight;elemTop-=100,elemBottom+=100;var send_request=!1;(scrollTop==scrollBottom||elemTop==elemBottom)&&(send_request=!0),scrollBottom>=elemTop&&elemBottom>=scrollTop&&(send_request=!0),send_request&&networkedblogs.send_request()}},networkedblogs.getWindowTop=function(){var scrOfY=0;return"number"==typeof window.pageYOffset?scrOfY=window.pageYOffset:document.body&&document.body.scrollTop?scrOfY=document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop&&(scrOfY=document.documentElement.scrollTop),scrOfY},networkedblogs.getWindowHeight=function(){var height=0;return document.body&&document.body.offsetWidth&&(height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(height=window.innerHeight),height},networkedblogs.getElemTop=function(elem){var curtop=0;if(elem.offsetParent)do curtop+=elem.offsetTop;while(elem=elem.offsetParent);return curtop},networkedblogs.send_request=function(){networkedblogs.is_send=!0,clearInterval(networkedblogs.timer),networkedblogs.nwidget.init()},networkedblogs.timer=setInterval(networkedblogs.checkVisibility,100),networkedblogs.blogId>=3e5&&networkedblogs.symphony_crosspost!==!1&&window.symphony.init({params:{ref:"nbwidget"}}));